repos:
  # Terraform 코드 포맷팅
  - repo: https://github.com/antonbabenko/pre-commit-terraform
    rev: v1.77.0
    hooks:
      - id: terraform_fmt        # terraform fmt 실행 - 코드 포매팅
      - id: terraform_validate   # terraform validate 실행 - 테라폼 코드가 맞게 적혔는가
      - id: terraform_tflint     # tflint 실행 - 린트
      - id: terraform_tfsec      # tfsec 실행 - 보안 검사

  # YAML 포맷 검사
  - repo: https://github.com/adrienverge/yamllint.git
    rev: v1.29.0
    hooks:
      - id: yamllint  # 야믈 린트

  # # 쿠버네티스 매니페스트 검사
  # - repo: https://github.com/instrumenta/kubeval
  #   rev: v0.16.1
  #   hooks:
  #     - id: kubeval  # 쿠버네티스 매니페스트 검사
  #       exclude: ".pre-commit-config.yaml"  # 이 파일을 검사 대상에서 제외

  # 로컬 훅: 커밋 메시지에 Jira 티켓 넘버 자동 추가 스크립트
  - repo: local
    hooks:
      - id: add-ticket-number
        name: Add Jira ticket number to commit message
        entry: ./ci_scripts/add_ticket_number.sh
        language: system
        stages: [commit-msg]
